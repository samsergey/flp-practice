<!DOCTYPE html>
<html lang="ru">
  <title></title>
  <head>
    <meta charset = "UTF-8"/>
    <link rel="stylesheet" href="../css/TPLBook.css">
    <link rel="stylesheet" href="../css/obsidian.css">
    <link rel="stylesheet" href="../lib/katex/katex.min.css">    

    <script src="../lib/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../lib/katex/katex.min.js"></script>
  </head>
  <body>
    <p id="header"></p>

    <div class='tasks'>
      <h2>Использование <sl>Emacs</sl></h2>
      <task>Открыв редактор <sl>Emacs</sl>, создайте новый файл, нажав последовательно сочетания клавиш: <keystroke>Ctrl</keystroke>+<keystroke>x</keystroke> <keystroke>Ctrl</keystroke>+<keystroke>f</keystroke> (далее будем писать <keystroke>C-c C-f</keystroke>). В строке минибуфера введите путь и имя создаваемого файла, например, <tt>D:/tmp/test.hs</tt>. Редактор перейдёт в режим работы с программами, написанными на Haskell: <tt>haskell-mode</tt>.</task>

      <task>Введите простейшую программу:</task>

      <pre><hs>-- это первая программа на Haskell
main = putStrLn "Hello world!"</hs></pre>

      <task>Нажмите <keystroke>C-c C-l</keystroke>. Эта команда запустит интерпретатор <sl>GHCi</sl>, загрузит в него написанный вами модуль и создаст новый буфер для работы с интерпретатором. Переключаться между буферами можно сочетанием клавиш <keystroke>C-x o</keystroke>.</task>

      <task>В строке ввода команды интерпретатора введите
	<pre><ghci><l></l>main</ghci></pre>
	Это выполнит вашу программу.</task>

      <task>Переключитесь в буфер с кодом программы. Измените что-либо в программе и сохраните изменения, нажав <keystroke>C-x C-s</keystroke>. После этого выйдите из <sl>Emacs</sl> с помощью сочетания <keystroke>C-x C-c</keystroke>.</task>

      <task>Снова откройте редактор <sl>Emacs</sl> и нажмите <keystroke>C-x C-r</keystroke>. Появится новый буфер со списком недавно открывавшихся файлов. Выбрать конкретный файл можно с помощью мыши, но проще воспользоваться номером файла, нажав клавишу с соответствующей цифрой.</task>

      <task>Просмотрите <a href ='emacs-ref.html' target='_blank'>краткую справку по <sl>Emacs</sl></a>, и поупражняйтесь в использовании сочетаний клавиш.</task>
      
      <h2>Использование <sl>GHCi</sl></h2>
      <h3>Простейшие вычисления</h3>
      <p>Cм. <a href ='haskell-ref.html#Выражения' target='_blank'>Выражения в Haskell</a></p>
      <task>Выполните в <sl>GHCi</sl></task>
    <pre><ghci>2 + 3
7 < 9.5
10^2
((1 + 2) * 3) + 100
"Hello!"
"Hello" ++ " world!"</ghci></pre>

    <h3>Вычисление функций</h3>

    <task>Выполните в <sl>GHCi</sl></task>
    <pre><ghci>sin 5
length "Hello!"
exp (sin (sqrt 3))
sin 2 + cos 6
mod 47 12
47 `mod` 12
print (3 + 6)
print $ 3 + 6
exp $ sin $ sqrt 3
(exp . sin . sqrt) 3</ghci></pre>

    <h3>Лямбда-функции</h3>
      <p>Cм. <a href ='haskell-ref.html#Анонимные функции' target='_blank'>Анонимные функции</a></p>
      <task>Выполните в <sl>GHCi</sl></task>

    <pre><ghci>(\x -> x*x) 4
(\x y -> x*x `mod` y) 4 3</ghci></pre>

    <h3>Создание и обработка списков</h3>
     <p>Cм. <a href ='haskell-ref.html#Списки и функции для работы со списками' target='_blank'>Списки в Haskell</a></p>
     <task>Выполните в <sl>GHCi</sl></task>
    <pre><ghci>[1,3,5,7]
[1..5]
[1,3..10]
sin <$> [1..5]
(\x -> x*x-2*x) <$> [1,3..10]
filter (\x -> x `mod` 3 == 0) [1..10]
sum [1..100000]</ghci></pre>

    <h2>Определение функций</h2>

    <task>Напишите функцию <code>area</code>, вычисляющую площадь круга, с указанным радиусом.</task>

    <task>Напишите функцию <code>mean</code>, вычисляющую среднее арифметическое двух чисел.</task>

    <task>Напишите определение для функции
      <eqn>\mathrm{sinc}(x) = \frac{\sin(x)}{x}.</eqn>
      Так, чтобы правильно обрабатывался случай <eq>x = 0</eq>. См. <a href ='haskell-ref.html#Определение с образцом' target='_blank'>Определение с образцом</a>.</task>

    <task><a name="FizzBuzz"></a>Решите классическую задачу FizzBuzz: Напишите программу, которая выводит на экран числа от 1 до 100, при этом вместо чисел, кратных 3, программа должна выводить слово <tt>"Fizz"</tt>, а вместо чисел, кратных 5 — слово <tt>"Buzz"</tt>. Если число кратно и 3, и 5, то программа должна выводить слово <tt>"FizzBuzz"</tt>.
      
      <p>
	В Haskell эта задача решается таким образом:
      <ul>
	<li>Определяется чистая функция (например <code>fizzbuzz</code>), которая преобразует числа в строки, согласно условиям задачи (см. <a href ='haskell-ref.html#Определение с охраной' target='_blank'>Определение с охраной</a>;</li>
	<li>Функция <code>fizzbuzz</code> отлаживается и тестируется в интерпретаторе;</li>
	<li>Функция <code>fizzbuzz</code> применяется к элементам списка чисел <code>[1..100]</code>, в результате получается список строк.</li>
      </ul>
      </p>
    </task>
    
<task>Напишите определение для функции <code>diff f x</code>, которая вычисляет производную функции <code>f</code> в точке <code>x</code>, используя приближение:
      <eqn>f^\prime(x) = \frac{f(x+dx)-f(x-dx)}{2dx},\quad dx = 10^{-8}</eqn>
      Вычислите таблицу производной для функций <eq>x^2</eq> и <eq>\sin x</eq>. </task>

<hr/>

<p>Одной из важных задач прикладной математики является задача численного интегрирования. Существует простой и эффективный метод приближённого вычисления интегралов: метод гауссовых квадратур третьего порядка, он дает точные значения интеграла для полиномов до 5-й степени:
<eqn>
\int_a^b f(x) dx \approx \frac{b-a}{18}\left[5\,g\left(-\sqrt{0.6}\right)+8\,g(0)+5\,g\left(\sqrt{0.6}\right)\right],
</eqn>
<eqn>
  g(x)=f\left(\frac{a+b}2+\frac{b-a}2x\right).  
</eqn>
</p>

<task>Напишите функцию <code>integrate f a b</code>, которая вычисляла бы интеграл от функции <code>f</code> в интервале от <code>a</code> до <code>b</code>, используя этот метод (cм. <a href ="haskell-ref.html#Дополнительные определения" target="_blank">Дополнительные определения</a>). Проверьте правильность работы функции <code>integrate</code> на следующих примерах:
  <eqn>\int_1^4 x^2\,dx,\quad \int_0^3 (x^5-x)\,dx,\quad \int_0^2 \sin x\,dx, \quad \int_0^\pi\,\mathrm{sinc}(x)dx.</eqn></task>


    <task>Используя функции <code>integrate</code> и <code>diff</code> Проинтегрируйте производную от какой-либо функции и убедитесь в том, что работает правило Ньютона-Лейбница: <eqn>\int_a^b f^\prime(x)\,dx=f(b)-f(a).</eqn></task>


    </div>
    <p id="footer"></p>
    <script src="../lib/postprocessing.js"></script>
  </body>
</html>

