<html>
  <title></title>
  <head>
    <meta charset = "UTF-8"/>
  </head>
  <body>
    <p id="header"></p>
    <h2>Ввод и вывод данных, тестирование.</h2>

    <OL class = "tasks">
      <task/> Создайте в текстовом редакторе два файла: 

      <div class="file">
	<title>lab3.js</title>
	<pre><code data-language = "javascript">// Приёмы ввода-вывода данных.

// чтение значения поля с id равным "input"
var x = X.value

//запись текста в параграф с id равным "output"
output.innerHTML = "Начальное значение: " + x

// функция, вызываемая  всякий раз, как значение поля input будет изменяться.
// Эта функция указана в параметре onchange поля input.
function run() {
   output.innerHTML = "Новое значение: " + X.value
}</code></pre>
      </div>

      <div class="file">
	<title>lab3.html</title>
	<pre><code data-language = "html">&lt;meta charset='UTF-8'&gt;
&lt;title&gt; Пример ввода-вывода &lt;/title&gt;

Пример организации текстового ввода-вывода данных.&lt;br&gt;

&lt;hr&gt;

Ввод программы: 
&lt;!-- Поле для ввода произвольного текста --&gt;
&lt;input id="X" type="text" value = 13 onchange="run()"&gt;&lt;br&gt;

Вывод программы: &lt;span id="output">&lt;/span&gt;

&lt;script src = &quot;lab3.js&quot;&gt;&lt;/script&gt;
	</code></pre>
      </div>

      В программе <file>lab3.js</file> используется ссылка на объект <code>X</code>.
      <pre><code data-language = "javascript">var x = X.value</code></pre>
      Он соответствует полю в коде страницы
      <pre><code data-language = "html">&lt;input id="X" type="text" onchange="run()"&gt;</code></pre> 
      Опишем его параметры:
      <ul>
	<li> <code>id</code> -- определяет идентификатор или имя поля. Этот параметр используется и в программе, как имя поля.
	<li> <code>value</code> -- начальное значение поля. Этот параметр используется для доступа к его значению в программе. 
	<li> <code>type</code> -- определяет тип поля. Кроме тектовых полей бывают выпадающие списки, кнопки, переключатели и прочие элементы.
	<li> <code>onchange</code> -- задаёт имя функции, которая будет выполнена при изменении значения воля ввода (после нажатии клавиши ввода).
      </ul>
      
      <p> Для вывода текста используется область <pre><code data-language = "html">&lt;span id="output">&lt;/span&gt;</code></pre> В программе мы меняем содержимое этой области, изменяя ее свойство <code>innerHTML</code>.
	</p>
	<hr>

      <task/> Откройте в браузере файл <file>lab3.html</file> и убедитесь в том, что изменение значения поля ввода приводит к изменению выводимого результата.
	<hr>

      <task/> Измените программу <file>lab3.js</file> так, чтобы она, используя вводимое значение, вычисляла и выводила на страницу квадрат этой величины.
	<hr>

      <task/>
	Добавьте ещё два поля ввода и измените программу <file>lab3.js</file> так, чтобы она, используя три числа, как коэффициенты квадратного уравнения, вычисляла и выводила его корни. Для вычисления квадратного корня используйте функцию <code>Math.sqrt</code>. Поэкспериментируйте с несколькими значениями коэффициентов.
	<hr>

      <task/>
	Интерактивный ввод данных удобен для того, чтобы использовать программу по назначению, но не очень удобен в процессе её разработки и отладки.

	<p> В процессе разработки надёжной программы важную роль играет процесс тестирования, во время которого программе предъявляются данные для которых известны ожидаемые результаты. Для того, чтобы убедиться в корректности работы программы она должна для всего этого набора вариантов выдать верное поведение или ответ. В свою очередь, тесты должны максимально полно охватывать как типичные, так и нетипичные варианты.</p>

	<p> Производить тестирование в интерактивном режиме очень неудобно, поскольку приходится вводить много различных значений, сравнивая результаты с ожидаемыми. И при изменениях, вносимых в программу, повторять эту процедуру снова и снова.</p>

	<p> Вместо этого, стоит разбить программу на три части: препроцессор, процессор и постпроцессор. Препроцессор отвечает за ввод и подготовку данных, постпроцессор за вывод результатов, а процессор занимается, собственно, вычислениями и его разработка, обычно, представляет наибольший интерес. 

	  Хорошо, когда процессор представлен в виде чистой функции. Чистой называют функцию, результат которой зависит только от входных аргументов, и работа которой никак не зависит от внешних данных и никак их не изменяет. Чистые функции для одних и тех же аргументов всегда выдают один и тот же результат. Для чистых функций тестирование, действительно даёт возможность проверить правильность их работы, и гарантировать эту правильность в их дальнейшем использовании.</p>

	<p> Для примера рассмотрим программу, вычисляющую корни квадратного уравнения, задаваемого тремя коэффициентами.
	  <pre><code data-language = "javascript">
function run() {
  // препроцессор
  var a = A.value
  var b = B.value
  var c = C.value
  
  // постпроцессор
  output.innerHTML = "Корни уравнения: " + roots(a,b,c)
}

// процессор
function roots(a, b, c) {
  ...	    
}

// тестирование

function testEqual(a, b, name){
   if (a.toString() != b.toString()) 
     console.log("Test "+name+" failed:\n  expected\t" + b + "\n  got\t\t" + a)
}

// общий случай
testEqual(roots(1,2,-3), [1,-3], "общий случай, целые корни")
testEqual(roots(2,-1,-5), [1.8507810593582121,-1.3507810593582121], "общий случай")
testEqual(roots(1,0,0), [0,0], "вырожденный случай")
testEqual(roots(1,0,-1), [1,-1], "вырожденный случай")
testEqual(roots(1,1,0), [0,-1], "вырожденный случай")
testEqual(roots(1,2,1), [-1,-1], "кратные корни")
testEqual(roots(1,-2,1), [1,1], "кратные корни")
testEqual(roots(1,1,1), [], "отрицательный дискриминант")
	  </code></pre>
	</p>

	Функция <code><a name="testEqual">testEqual</a></code> устроена таким образом, что в случае успешного выполнения теста, она не сообщает ничего. Сообщение выводится только при провале.

	<p> Напишите функцию <code>roots</code> так, чтобы она удовлетворяла всем тестам.</p>

	<p> Подумайте, каких тестов не хватает, добавьте их и измените, если нужно тело функции.</p>
	
	<hr>

	<task/> Создайте <the>Универсальный решатель квадратных уравнений</the>. Его интерфейс может выглядеть так:
	<p>
	  <div class="page">
	    <title>Универсальный решатель квадратных уравнений</title>
	    <p>Программа решает квадратное уравнение:</p>
	    <p align="center">
	     <i>ax<sup>2</sup>+bx+c</i> = 0
	    </p>
	    <p>с коэффициентами</p>
	    <p align="center"> 
	      a = <input type="text" size=4 value=1>
	      b = <input type="text" size=4 value=2>
	      c = <input type="text" size=4 value=-3>
	    </p>
	    <button type="text">Посчитать</button>
	    <hr>
	    <p> Ответ:</p>
	    <p align="center">
	      <i>x<sub>1</sub></i> = -3<br> <i>x<sub>2</sub></i> = 1
	    </p>
	  </div>	
	</p>

      <p>При этом,
	<ul>
	  <li> если корня два, или корень кратный, выводятся оба корня;
	  <li> если корень один (уравнение линейное), выводится один корень;
	  <li> если вещественных корней нет, выводится сообщение: "вещественных корней нет."
	</ul>
      </p>
	
    </OL>

    <p id="footer"></p>
    <script src="../../../lib/rainbow.js"></script>
    <script src="../../../lib/language/generic.js"></script>
    <script src="../../../lib/language/javascript.js"></script>
    <script src="../../../lib/language/html.js"></script>
    <script src="postprocessing.js"></script>
  </body>
</html>
